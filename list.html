<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Costco Shopping List</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; background: #f5f5f5; }
        h1 { text-align: center; color: #667eea; }
        .date { text-align: center; color: #666; margin-bottom: 20px; }
        .item { padding: 12px; background: white; border-bottom: 1px solid #ddd; display: flex; align-items: center; }
        .item input { width: 20px; height: 20px; margin-right: 12px; cursor: pointer; }
        .item label { flex: 1; cursor: pointer; }
        .item.checked { background: #e8f5e9; text-decoration: line-through; opacity: 0.6; }
        .back { text-align: center; margin: 20px 0; }
        .back a { color: #667eea; text-decoration: none; font-size: 16px; }
        .counter { text-align: center; font-size: 16px; margin: 15px 0; color: #666; }
    </style>
</head>
<body>
    <div style="text-align: center; margin: 15px 0;">
        <img src="family-logo.png" alt="Family Logo" style="width: 60px; height: 60px; border-radius: 50%; object-fit: cover; box-shadow: 0 2px 8px rgba(0,0,0,0.2);">
    </div>
    
    <h1>ğŸ›’ Costco Ancaster</h1>
    <div class="date" id="date"></div>
    <div class="counter" id="counter"></div>
    <div id="list"></div>
    
    <div style="margin: 20px 0; padding: 15px; background: white; border-radius: 8px;">
        <h3 style="margin: 0 0 10px 0; color: #667eea;">Add Item / Adicionar Item</h3>
        <input type="text" id="custom-item" placeholder="Enter item name / Nome do item" style="width: 100%; padding: 10px; margin-bottom: 10px; border: 2px solid #ddd; border-radius: 5px; font-size: 16px;">
        <button onclick="addCustomItem()" style="width: 100%; padding: 12px; background: #667eea; color: white; border: none; border-radius: 5px; font-size: 16px; margin-bottom: 10px;">â• Add to List / Adicionar Ã  Lista</button>
    </div>
    
    <button onclick="doneShoppingPrompt()" style="width: calc(100% - 40px); max-width: 560px; position: fixed; bottom: 80px; left: 50%; transform: translateX(-50%); padding: 15px; background: #25D366; color: white; border: none; border-radius: 8px; font-size: 18px; font-weight: bold; box-shadow: 0 4px 10px rgba(0,0,0,0.2);">âœ… Done Shopping / Compras ConcluÃ­das</button>
    
    <div class="back">
        <a href="index.html">â† Back to main list / Voltar Ã  lista principal</a>
    </div>

    <script>
        var itemMap = {
            'en-0-0': 'Work Bars', 'en-0-1': 'Fiber Bars (Chocolate)', 'en-0-2': 'Rice Krispies Bars', 'en-0-3': 'Kirkland Protein Bar', 'en-0-4': 'Pumpkin Seeds', 'en-0-5': 'Cashews', 'en-0-6': 'Raisins', 'en-0-7': 'Sesame Seeds',
            'en-1-0': "Cake", 'en-1-1': 'Ginger Cookies', 'en-1-2': 'Small Oat Muffins', 'en-1-3': 'Hot Dog Buns', 'en-1-4': 'Whole Wheat Tortillas', 'en-1-5': "Sandwich Bread", 'en-1-6': "Texas Bread (2 packs)", 'en-1-7': 'Frozen Croissants', 'en-1-8': 'Frozen Breads',
            'en-2-0': 'Smoked Turkey Breast', 'en-2-1': 'Bacon', 'en-2-2': 'Chicken Thighs', 'en-2-3': 'Ground Beef', 'en-2-4': 'Tilapia',
            'en-3-0': 'Lemon', 'en-3-1': 'Apples', 'en-3-2': 'Bananas', 'en-3-3': 'Tangerines', 'en-3-4': 'Papaya', 'en-3-5': 'Prunes', 'en-3-6': 'Yellow Potatoes (8)', 'en-3-7': 'Sweet Potatoes (6)', 'en-3-8': 'Carrots (4)', 'en-3-9': 'Beets (2)', 'en-3-10': 'Pumpkin', 'en-3-11': 'Cassava', 'en-3-12': 'Red Onions (2)', 'en-3-13': 'Corn',
            'en-4-0': 'Goat Cheese', 'en-4-1': 'Feta Cheese', 'en-4-2': 'Coalho Cheese',
            'en-5-0': 'Mushrooms', 'en-5-1': 'Cucumber', 'en-5-2': 'Tomatoes', 'en-5-3': 'Cherry Tomatoes', 'en-5-4': 'Bell Peppers', 'en-5-5': 'Broccoli', 'en-5-6': 'Avocado', 'en-5-7': 'Brussels Sprouts', 'en-5-8': 'Asparagus', 'en-5-9': 'Red Cabbage', 'en-5-10': 'Garlic', 'en-5-11': 'Spinach',
            'en-6-0': 'Milk', 'en-6-1': 'Yogurt', 'en-6-2': 'Greek Yogurt', 'en-6-3': "Kids Yogurt", 'en-6-4': 'Butter', 'en-6-5': 'Ghee', 'en-6-6': 'Coconut Oil', 'en-6-7': 'Heavy Cream', 'en-6-8': 'Eggs (2 packs)', 'en-6-9': 'Sliced Cheese', 'en-6-10': 'Cheese', 'en-6-11': 'Cream Cheese LIGHT', 'en-6-12': 'Grated Cheese', 'en-6-13': 'Hummus',
            'en-7-0': 'Lysol Wipes', 'en-7-1': 'Toilet Bowl Cleaner', 'en-7-2': 'Clorox Spray', 'en-7-3': 'Windex', 'en-7-4': 'Dawn Dish Soap', 'en-7-5': 'Dish Gloves', 'en-7-6': 'Sponges', 'en-7-7': 'Duster Refills', 'en-7-8': 'Laundry Detergent', 'en-7-9': 'Scent Boosters', 'en-7-10': 'Floor Wipes', 'en-7-11': 'Kitchen Cloth', 'en-7-12': 'Hand Soap', 'en-7-13': 'Aluminum Foil', 'en-7-14': 'Toilet Paper', 'en-7-15': 'Paper Towels', 'en-7-16': 'Plastic Wrap', 'en-7-17': 'White Trash Bags', 'en-7-18': 'Black Trash Bags', 'en-7-19': 'Organic Bags',
            'en-8-0': 'Que Pasa Chips', 'en-8-1': 'Pringles', 'en-8-2': 'Goldfish', 'en-8-3': 'Red Box Cookies', 'en-8-4': 'Lotus Cookies', 'en-8-5': 'Oreos', 'en-8-6': 'Maria Cookies', 'en-8-7': 'School Cakes',
            'en-9-0': 'Frozen Corn', 'en-9-1': 'Frozen Fries', 'en-9-2': 'Frozen Strawberries', 'en-9-3': 'Chicken Nuggets', 'en-9-4': 'Cheese Bread', 'en-9-5': 'Pizza',
            'en-10-0': 'Olive Oil', 'en-10-1': 'Vinegar', 'en-10-2': 'Mayonnaise', 'en-10-3': 'Ketchup', 'en-10-4': 'Mustard', 'en-10-5': 'Tomato Sauce', 'en-10-6': 'Soy Sauce',
            'en-11-0': 'Canned Tuna',
            'en-12-0': 'Sea Salt', 'en-12-1': 'Garlic Granulated', 'en-12-2': 'Paprika', 'en-12-3': 'Thyme', 'en-12-4': 'Lemon Pepper', 'en-12-5': 'Ginger', 'en-12-6': 'Turmeric', 'en-12-7': 'Knorr', 'en-12-8': 'Black Pepper', 'en-12-9': 'Oregano', 'en-12-10': 'Cinnamon', 'en-12-11': 'Green Onions', 'en-12-12': 'Fines Herbes',
            'en-13-0': 'Shampoo', 'en-13-1': 'Conditioner', 'en-13-2': 'Bar Soap', 'en-13-3': 'Body Lotion', 'en-13-4': 'Toothpaste', 'en-13-5': "Kids Toothpaste", 'en-13-6': 'Dental Floss', 'en-13-7': 'Mouthwash', 'en-13-8': 'Wet Wipes', 'en-13-9': 'Sanitary Pads',
            'en-14-0': 'Vitamin B12', 'en-14-1': 'Magnesium', 'en-14-2': 'Zinc', 'en-14-3': 'Omega-3', 'en-14-4': 'Vitamin D', 'en-14-5': 'Vitamin C', 'en-14-6': "Children's Multivitamin",
            'en-15-0': 'Farinha LÃ¡ctea', 'en-15-1': "Kids Cereal", 'en-15-2': 'Apple Juice',
            'en-16-0': 'Pasta', 'en-16-1': 'Brown Rice', 'en-16-2': 'Quinoa', 'en-16-3': 'White Rice', 'en-16-4': 'Oats', 'en-16-5': 'Flour', 'en-16-6': 'Corn Starch', 'en-16-7': 'Baking Soda', 'en-16-8': 'Baking Powder', 'en-16-9': 'Popcorn', 'en-16-10': 'Corn Couscous', 'en-16-11': 'Tapioca',
            'en-17-0': 'Coffee', 'en-17-1': 'Decaf Instant Coffee', 'en-17-2': 'Decaf Ground Coffee', 'en-17-3': 'Chamomile Tea', 'en-17-4': 'Orange Juice', 'en-17-5': 'Sparkling Water', 'en-17-6': 'Zero Soda',
            'en-18-0': 'Cheese Bread', 'en-18-1': 'Ice Cream', 'en-18-2': 'Strawberry Jam', 'en-18-3': 'Pancake Mix', 'en-18-4': 'Maple Syrup', 'en-18-5': 'Dulce de Leche', 'en-18-6': 'Condensed Milk', 'en-18-7': 'Honey', 'en-18-8': 'Granola', 'en-18-9': 'Demerara Sugar', 'en-18-10': 'White Sugar', 'en-18-11': 'Hot Chocolate', 'en-18-12': 'Stevia',
            'pt-0-0': 'Barrinhas Trabalho', 'pt-0-1': 'Barra cereal chocolate', 'pt-0-2': 'Barrinha Rice Krispies', 'pt-0-3': 'Barra ProteÃ­na Kirkland', 'pt-0-4': 'Sementes abÃ³bora', 'pt-0-5': 'Castanhas', 'pt-0-6': 'Uvas passas', 'pt-0-7': 'Gergelim',
            'pt-1-0': 'Bolo', 'pt-1-1': 'Ginger Cookies', 'pt-1-2': 'Bolinho aveia', 'pt-1-3': 'PÃ£o hot dog', 'pt-1-4': 'Tortillas integral', 'pt-1-5': 'PÃ£o SanduÃ­che', 'pt-1-6': 'PÃ£o Texas (2 pacotes)', 'pt-1-7': 'Croissant congelados', 'pt-1-8': 'PÃ£es congelados',
            'pt-2-0': 'Peito Peru defumado', 'pt-2-1': 'Bacon', 'pt-2-2': 'Coxas Frango', 'pt-2-3': 'Carne MoÃ­da', 'pt-2-4': 'TilÃ¡pia',
            'pt-3-0': 'LimÃ£o', 'pt-3-1': 'MaÃ§Ã£', 'pt-3-2': 'Banana', 'pt-3-3': 'Tangerina', 'pt-3-4': 'MamÃ£o', 'pt-3-5': 'Ameixas', 'pt-3-6': 'Batata amarela (8)', 'pt-3-7': 'Batata doce (6)', 'pt-3-8': 'Cenoura (4)', 'pt-3-9': 'Beterraba (2)', 'pt-3-10': 'Jerimum', 'pt-3-11': 'Macaxeira', 'pt-3-12': 'Cebola roxa (2)', 'pt-3-13': 'Milho',
            'pt-4-0': 'Queijo cabra', 'pt-4-1': 'Queijo fetta', 'pt-4-2': 'Queijo coalho',
            'pt-5-0': 'Cogumelos', 'pt-5-1': 'Pepino', 'pt-5-2': 'Tomates', 'pt-5-3': 'Tomates cerejas', 'pt-5-4': 'PimentÃ£o', 'pt-5-5': 'BrÃ³colis', 'pt-5-6': 'Abacate', 'pt-5-7': 'Couve Bruxelas', 'pt-5-8': 'Aspargos', 'pt-5-9': 'Couve roxa', 'pt-5-10': 'Alho', 'pt-5-11': 'Espinafre',
            'pt-6-0': 'Leite', 'pt-6-1': 'Iogurte', 'pt-6-2': 'Iogurte grego', 'pt-6-3': 'Iogurte Infantil', 'pt-6-4': 'Manteiga', 'pt-6-5': 'Manteiga terra', 'pt-6-6': 'Ã“leo coco', 'pt-6-7': 'Creme leite', 'pt-6-8': 'Ovos (2 pacotes)', 'pt-6-9': 'Queijo fatias', 'pt-6-10': 'Queijo', 'pt-6-11': 'Cream cheese LIGHT', 'pt-6-12': 'Queijo ralado', 'pt-6-13': 'Hummus',
            'pt-7-0': 'LenÃ§os Lysol', 'pt-7-1': 'Limpador vaso', 'pt-7-2': 'Spray Clorox', 'pt-7-3': 'Windex', 'pt-7-4': 'Detergente dawn', 'pt-7-5': 'Luvas', 'pt-7-6': 'Esponjas', 'pt-7-7': 'Refil espanador', 'pt-7-8': 'SabÃ£o roupas', 'pt-7-9': 'Pedrinhas cheirosas', 'pt-7-10': 'LenÃ§os chÃ£o', 'pt-7-11': 'Paninho pia', 'pt-7-12': 'Sabonete lÃ­quido', 'pt-7-13': 'Papel alumÃ­nio', 'pt-7-14': 'Papel higiÃªnico', 'pt-7-15': 'Papel toalha', 'pt-7-16': 'Papel filme', 'pt-7-17': 'Sacos brancos', 'pt-7-18': 'Sacos pretos', 'pt-7-19': 'Sacos orgÃ¢nicos',
            'pt-8-0': 'Que Pasa Chips', 'pt-8-1': 'Pringles', 'pt-8-2': 'Goldfish', 'pt-8-3': 'Biscoito vermelho', 'pt-8-4': 'Biscoito Lotus', 'pt-8-5': 'Oreo', 'pt-8-6': 'Bolacha Maria', 'pt-8-7': 'Bolinho escola',
            'pt-9-0': 'Milho congelado', 'pt-9-1': 'Batata frita', 'pt-9-2': 'Morangos', 'pt-9-3': 'Nuggets', 'pt-9-4': 'PÃ£o queijo', 'pt-9-5': 'Pizza calabresa',
            'pt-10-0': 'Azeite', 'pt-10-1': 'Vinagre', 'pt-10-2': 'Maionese', 'pt-10-3': 'Ketchup', 'pt-10-4': 'Mostarda', 'pt-10-5': 'Molho tomate', 'pt-10-6': 'Shoyu',
            'pt-11-0': 'Atum lata',
            'pt-12-0': 'Sal marinho', 'pt-12-1': 'Alho granulado', 'pt-12-2': 'PÃ¡prica', 'pt-12-3': 'Tomilho', 'pt-12-4': 'Lemon Pepper', 'pt-12-5': 'Gengibre pÃ³', 'pt-12-6': 'CÃºrcuma', 'pt-12-7': 'Knorr', 'pt-12-8': 'Pimenta reino', 'pt-12-9': 'OrÃ©gano', 'pt-12-10': 'Canela', 'pt-12-11': 'Cebolinha', 'pt-12-12': 'Ervas finas',
            'pt-13-0': 'Shampoo', 'pt-13-1': 'Condicionador', 'pt-13-2': 'Sabonetes', 'pt-13-3': 'Hidratante', 'pt-13-4': 'Pasta dentes', 'pt-13-5': 'Pasta Infantil', 'pt-13-6': 'Fio dental', 'pt-13-7': 'Enxaguante', 'pt-13-8': 'LenÃ§o umedecido', 'pt-13-9': 'Absorvente',
            'pt-14-0': 'Vitamina B12', 'pt-14-1': 'MagnÃ©sio', 'pt-14-2': 'Zinco', 'pt-14-3': 'Ã”mega', 'pt-14-4': 'Vitamina D', 'pt-14-5': 'Vitamina C', 'pt-14-6': 'PolivitamÃ­nico infantil',
            'pt-15-0': 'Farinha LÃ¡ctea', 'pt-15-1': 'Cereal Infantil', 'pt-15-2': 'Suco maÃ§Ã£ escola',
            'pt-16-0': 'MacarrÃ£o', 'pt-16-1': 'Arroz integral', 'pt-16-2': 'Quinoa', 'pt-16-3': 'Arroz branco', 'pt-16-4': 'Aveia', 'pt-16-5': 'Farinha trigo', 'pt-16-6': 'Amido milho', 'pt-16-7': 'Bicarbonato', 'pt-16-8': 'Fermento', 'pt-16-9': 'Pipoca', 'pt-16-10': 'Cuscuz', 'pt-16-11': 'Tapioca',
            'pt-17-0': 'CafÃ©', 'pt-17-1': 'CafÃ© descafeinado', 'pt-17-2': 'NescafÃ© descafeinado', 'pt-17-3': 'ChÃ¡ camomila', 'pt-17-4': 'Suco laranja', 'pt-17-5': 'Ãgua gÃ¡s', 'pt-17-6': 'Refrigerante ZERO',
            'pt-18-0': 'PÃ£o queijo', 'pt-18-1': 'Sorvete', 'pt-18-2': 'Geleia morango', 'pt-18-3': 'Panqueca', 'pt-18-4': 'Maple Syrup', 'pt-18-5': 'Doce leite', 'pt-18-6': 'Leite condensado', 'pt-18-7': 'Mel', 'pt-18-8': 'Granola', 'pt-18-9': 'AÃ§Ãºcar demerara', 'pt-18-10': 'AÃ§Ãºcar branco', 'pt-18-11': 'Chocolate quente', 'pt-18-12': 'Stevia'
        };

        var params = new URLSearchParams(window.location.search);
        var itemIds = params.get('items') ? params.get('items').split(',') : [];
        var quantities = params.get('qtys') ? JSON.parse(decodeURIComponent(params.get('qtys'))) : {};
        var customItemsFromUrl = params.get('custom') ? JSON.parse(decodeURIComponent(params.get('custom'))) : [];
        var lang = params.get('lang') || 'en';
        
        var today = new Date();
        var day = String(today.getDate()).padStart(2, '0');
        var month = String(today.getMonth() + 1).padStart(2, '0');
        var year = today.getFullYear();
        document.getElementById('date').textContent = day + '/' + month + '/' + year;
        
        var listDiv = document.getElementById('list');
        var total = itemIds.length + customItemsFromUrl.length;
        var checked = 0;
        
        var itemEmojis = {
            'Work Bars': 'ğŸ«', 'Barrinhas Trabalho': 'ğŸ«',
            'Kirkland Protein Bar': 'ğŸ’ª', 'Barra ProteÃ­na Kirkland': 'ğŸ’ª',
            'Chicken Thighs': 'ï¿½', 'Coxas Frango': 'ğŸ—',
            'Ground Beef': 'ğŸ¥©', 'Carne MoÃ­da': 'ğŸ¥©',
            'Tilapia': 'ğŸŸ', 'TilÃ¡pia': 'ğŸŸ',
            'Fiber Bars': 'ğŸ«', 'Barra cereal': 'ğŸ«',
            'Bars': 'ğŸ«', 'Rice Krispies': 'ğŸ«',
            'Seeds': 'ğŸŒ»', 'Sementes': 'ğŸŒ»',
            'Cashews': 'ğŸ¥œ', 'Castanhas': 'ğŸ¥œ',
            'Raisins': 'ğŸ‡', 'Uvas passas': 'ğŸ‡',
            'Sesame': 'ğŸŒ°', 'Gergelim': 'ğŸŒ°',
            'Cake': 'ğŸ‚', 'Bolo': 'ğŸ‚',
            'Cookies': 'ğŸª', 'Ginger': 'ğŸª',
            'Muffins': 'ğŸ§', 'Bolinho': 'ğŸ§',
            'Bread': 'ğŸ', 'PÃ£o': 'ğŸ',
            'Hot Dog': 'ğŸŒ­',
            'Tortillas': 'ğŸŒ®',
            'Croissant': 'ğŸ¥',
            'Turkey': 'ğŸ¦ƒ', 'Peru': 'ğŸ¦ƒ',
            'Bacon': 'ğŸ¥“',
            'Lemon': 'ğŸ‹', 'LimÃ£o': 'ğŸ‹',
            'Apple': 'ğŸ', 'MaÃ§Ã£': 'ğŸ',
            'Banana': 'ğŸŒ',
            'Tangerine': 'ğŸŠ', 'Tangerina': 'ğŸŠ',
            'Papaya': 'ğŸˆ', 'MamÃ£o': 'ğŸˆ',
            'Prune': 'ğŸ«', 'Ameixa': 'ğŸ«',
            'Potato': 'ğŸ¥”', 'Batata': 'ğŸ¥”',
            'Carrot': 'ğŸ¥•', 'Cenoura': 'ğŸ¥•',
            'Beet': 'ğŸ«', 'Beterraba': 'ğŸ«',
            'Pumpkin': 'ğŸƒ', 'Jerimum': 'ğŸƒ',
            'Cassava': 'ğŸ¥”', 'Macaxeira': 'ğŸ¥”',
            'Onion': 'ğŸ§…', 'Cebola': 'ğŸ§…',
            'Corn': 'ğŸŒ½', 'Milho': 'ğŸŒ½',
            'Cheese': 'ğŸ§€', 'Queijo': 'ğŸ§€',
            'Mushroom': 'ğŸ„', 'Cogumelo': 'ğŸ„',
            'Cucumber': 'ğŸ¥’', 'Pepino': 'ğŸ¥’',
            'Tomato': 'ğŸ…', 'Tomate': 'ğŸ…',
            'Pepper': 'ğŸ«‘', 'PimentÃ£o': 'ğŸ«‘',
            'Broccoli': 'ğŸ¥¦', 'BrÃ³colis': 'ğŸ¥¦',
            'Avocado': 'ğŸ¥‘', 'Abacate': 'ğŸ¥‘',
            'Brussels': 'ğŸ¥¬', 'Couve Bruxelas': 'ğŸ¥¬',
            'Asparagus': 'ğŸŒ¿', 'Aspargo': 'ğŸŒ¿',
            'Cabbage': 'ğŸ¥¬', 'Couve': 'ğŸ¥¬',
            'Garlic': 'ğŸ§„', 'Alho': 'ğŸ§„',
            'Spinach': 'ğŸ¥¬', 'Espinafre': 'ğŸ¥¬',
            'Milk': 'ğŸ¥›', 'Leite': 'ğŸ¥›',
            'Yogurt': 'ğŸ¥›', 'Iogurte': 'ğŸ¥›',
            'Butter': 'ğŸ§ˆ', 'Manteiga': 'ğŸ§ˆ',
            'Ghee': 'ğŸ§ˆ',
            'Coconut Oil': 'ğŸ¥¥', 'Ã“leo coco': 'ğŸ¥¥',
            'Cream': 'ğŸ¥›', 'Creme': 'ğŸ¥›',
            'Egg': 'ğŸ¥š', 'Ovo': 'ğŸ¥š',
            'Hummus': 'ğŸ«˜',
            'Wipe': 'ğŸ§»', 'LenÃ§o': 'ğŸ§»',
            'Soap': 'ğŸ§¼', 'Sabonete': 'ğŸ§¼', 'SabÃ£o': 'ğŸ§¼',
            'Cleaner': 'ğŸ§¹', 'Limpador': 'ğŸ§¹',
            'Spray': 'ğŸ’§',
            'Glove': 'ğŸ§¤', 'Luva': 'ğŸ§¤',
            'Sponge': 'ğŸ§½', 'Esponja': 'ğŸ§½',
            'Detergent': 'ğŸ§´', 'Detergente': 'ğŸ§´',
            'Paper': 'ğŸ§»', 'Papel': 'ğŸ§»',
            'Foil': 'ğŸ“‹', 'AlumÃ­nio': 'ğŸ“‹',
            'Bag': 'ğŸ›ï¸', 'Saco': 'ğŸ›ï¸',
            'Chip': 'ğŸ¿',
            'Pringles': 'ğŸ¥”',
            'Goldfish': 'ğŸŸ',
            'Oreo': 'ğŸª',
            'Pizza': 'ğŸ•',
            'Strawberr': 'ğŸ“', 'Morango': 'ğŸ“',
            'Nugget': 'ğŸ—',
            'Fries': 'ğŸŸ', 'Batata frita': 'ğŸŸ',
            'Olive Oil': 'ğŸ«’', 'Azeite': 'ğŸ«’',
            'Vinegar': 'ğŸ§ª', 'Vinagre': 'ğŸ§ª',
            'Mayonnaise': 'ğŸ¥«', 'Maionese': 'ğŸ¥«',
            'Ketchup': 'ğŸ…',
            'Mustard': 'ğŸŒ­', 'Mostarda': 'ğŸŒ­',
            'Soy': 'ğŸ¥¢', 'Shoyu': 'ğŸ¥¢',
            'Tuna': 'ğŸŸ', 'Atum': 'ğŸŸ',
            'Salt': 'ğŸ§‚', 'Sal': 'ğŸ§‚',
            'Pepper': 'ğŸŒ¶ï¸', 'Pimenta': 'ğŸŒ¶ï¸',
            'Paprika': 'ğŸŒ¶ï¸', 'PÃ¡prica': 'ğŸŒ¶ï¸',
            'Ginger': 'ğŸ«š', 'Gengibre': 'ğŸ«š',
            'Cinnamon': 'ğŸ¥˜', 'Canela': 'ğŸ¥˜',
            'Oregano': 'ğŸŒ¿', 'OrÃ©gano': 'ğŸŒ¿',
            'Shampoo': 'ğŸ§´',
            'Conditioner': 'ğŸ§´', 'Condicionador': 'ğŸ§´',
            'Lotion': 'ğŸ§´', 'Hidratante': 'ğŸ§´',
            'Toothpaste': 'ğŸª¥', 'Pasta': 'ğŸª¥',
            'Floss': 'ğŸ¦·', 'Fio dental': 'ğŸ¦·',
            'Mouthwash': 'ğŸ§ª', 'Enxaguante': 'ğŸ§ª',
            'Pad': 'ğŸ©¹', 'Absorvente': 'ğŸ©¹',
            'Vitamin': 'ğŸ’Š', 'Vitamina': 'ğŸ’Š',
            'Magnesium': 'ğŸ’Š', 'MagnÃ©sio': 'ğŸ’Š',
            'Zinc': 'ğŸ’Š', 'Zinco': 'ğŸ’Š',
            'Omega': 'ğŸ’Š', 'Ã”mega': 'ğŸ’Š',
            'Juice': 'ğŸ§ƒ', 'Suco': 'ğŸ§ƒ',
            'Cereal': 'ğŸ¥£',
            'Pasta': 'ğŸ', 'MacarrÃ£o': 'ğŸ',
            'Rice': 'ğŸš', 'Arroz': 'ğŸš',
            'Quinoa': 'ğŸŒ¾',
            'Oat': 'ğŸŒ¾', 'Aveia': 'ğŸŒ¾',
            'Flour': 'ğŸŒ¾', 'Farinha': 'ğŸŒ¾',
            'Popcorn': 'ğŸ¿', 'Pipoca': 'ğŸ¿',
            'Tapioca': 'ğŸ¥˜',
            'Coffee': 'â˜•', 'CafÃ©': 'â˜•',
            'Tea': 'ğŸµ', 'ChÃ¡': 'ğŸµ',
            'Water': 'ğŸ’§', 'Ãgua': 'ğŸ’§',
            'Soda': 'ğŸ¥¤', 'Refrigerante': 'ğŸ¥¤',
            'Ice Cream': 'ğŸ¨', 'Sorvete': 'ğŸ¨',
            'Jam': 'ğŸ“', 'Geleia': 'ğŸ“',
            'Pancake': 'ğŸ¥', 'Panqueca': 'ğŸ¥',
            'Syrup': 'ğŸ¯', 'Maple': 'ğŸ¯',
            'Dulce': 'ğŸ¯', 'Doce': 'ğŸ¯',
            'Honey': 'ğŸ¯', 'Mel': 'ğŸ¯',
            'Granola': 'ğŸ¥£',
            'Sugar': 'ğŸ¬', 'AÃ§Ãºcar': 'ğŸ¬',
            'Chocolate': 'ğŸ«',
            'Stevia': 'ğŸŒ¿'
        };
        
        function getItemEmoji(itemName) {
            for (var key in itemEmojis) {
                if (itemName.toLowerCase().includes(key.toLowerCase())) {
                    return itemEmojis[key] + ' ';
                }
            }
            return '';
        }
        
        itemIds.forEach(function(id) {
            var itemName = itemMap[id] || id;
            var emoji = getItemEmoji(itemName);
            var qty = quantities[id] || '1';
            var itemDiv = document.createElement('div');
            itemDiv.className = 'item';
            itemDiv.innerHTML = '<input type="checkbox" id="' + id + '"><label for="' + id + '">' + emoji + itemName + ' (x' + qty + ')</label>';
            listDiv.appendChild(itemDiv);
            
            var checkbox = itemDiv.querySelector('input');
            checkbox.addEventListener('change', function() {
                itemDiv.className = this.checked ? 'item checked' : 'item';
                checked = document.querySelectorAll('input:checked').length;
                updateCounter();
            });
        });
        
        customItemsFromUrl.forEach(function(itemName, index) {
            var customId = 'pending-' + index;
            var itemDiv = document.createElement('div');
            itemDiv.className = 'item';
            itemDiv.style.background = '#fff9e6';
            itemDiv.innerHTML = '<input type="checkbox" id="' + customId + '" checked><label for="' + customId + '">â“ ' + itemName + ' <span style="font-size: 11px; color: #f57c00;">(PENDING APPROVAL)</span></label>' +
                '<button onclick="approveCustomItem(\'' + customId + '\', \'' + itemName + '\', false)" style="padding: 4px 8px; background: #667eea; color: white; border: none; border-radius: 3px; font-size: 12px; margin-left: 5px;">âœ“ Add to Main</button>' +
                '<button onclick="approveCustomItem(\'' + customId + '\', \'' + itemName + '\', true)" style="padding: 4px 8px; background: #f57c00; color: white; border: none; border-radius: 3px; font-size: 12px; margin-left: 5px;">#OneTime</button>';
            listDiv.appendChild(itemDiv);
            
            var checkbox = itemDiv.querySelector('input');
            checkbox.addEventListener('change', function() {
                itemDiv.style.background = this.checked ? '#fff9e6' : '#fff';
                updateCounter();
            });
        });
        
        function updateCounter() {
            checked = document.querySelectorAll('input:checked').length;
            var remaining = total - checked;
            var text = lang === 'en' 
                ? remaining + ' remaining of ' + total + ' items'
                : remaining + ' restantes de ' + total + ' itens';
            document.getElementById('counter').textContent = text;
        }
        
        var customItems = [];
        var approvedCustomItems = [];
        
        function approveCustomItem(itemId, itemName, oneTimeOnly) {
            var itemDiv = document.getElementById(itemId).parentElement;
            itemDiv.style.background = '#e8f5e9';
            itemDiv.innerHTML = '<input type="checkbox" id="' + itemId + '" checked><label for="' + itemId + '">âœ… ' + itemName + (oneTimeOnly ? ' <span style="font-size: 11px; color: #f57c00;">#onetimeonly</span>' : '') + '</label>';
            
            approvedCustomItems.push({
                name: itemName,
                oneTimeOnly: oneTimeOnly,
                id: itemId
            });
            
            var checkbox = itemDiv.querySelector('input');
            checkbox.addEventListener('change', function() {
                itemDiv.className = this.checked ? 'item checked' : 'item';
                updateCounter();
            });
            
            customItems.push({
                name: itemName,
                oneTimeOnly: oneTimeOnly,
                id: itemId
            });
        }
        
        function addCustomItem() {
            var input = document.getElementById('custom-item');
            var itemName = input.value.trim();
            if (!itemName) {
                alert(lang === 'en' ? 'Please enter an item name' : 'Por favor, digite o nome do item');
                return;
            }
            
            var addToMain = confirm(lang === 'en' 
                ? 'Add "' + itemName + '" to main list for future use?\n\nClick OK to add to main list\nClick Cancel for one-time only'
                : 'Adicionar "' + itemName + '" Ã  lista principal para uso futuro?\n\nClique OK para adicionar Ã  lista principal\nClique Cancelar para uso Ãºnico');
            
            var customId = 'custom-' + Date.now();
            var itemDiv = document.createElement('div');
            itemDiv.className = 'item';
            itemDiv.style.background = '#fff9e6';
            itemDiv.innerHTML = '<input type="checkbox" id="' + customId + '"><label for="' + customId + '">' + itemName + (addToMain ? '' : ' #onetimeonly') + '</label>';
            document.getElementById('list').appendChild(itemDiv);
            
            var checkbox = itemDiv.querySelector('input');
            checkbox.addEventListener('change', function() {
                itemDiv.className = this.checked ? 'item checked' : 'item';
                total++;
                updateCounter();
            });
            
            customItems.push({
                name: itemName,
                oneTimeOnly: !addToMain,
                id: customId
            });
            
            input.value = '';
            total++;
            updateCounter();
        }
        
        function doneShoppingPrompt() {
            var allItems = document.querySelectorAll('.item');
            var found = [];
            var missing = [];
            
            allItems.forEach(function(item) {
                var checkbox = item.querySelector('input');
                var label = item.querySelector('label');
                var itemName = label.textContent;
                
                if (checkbox.checked) {
                    found.push(itemName);
                } else {
                    missing.push(itemName);
                }
            });
            
            var totalCost = prompt(lang === 'en' 
                ? 'Enter total amount paid (optional):'
                : 'Digite o valor total pago (opcional):');
            
            var logData = {
                date: new Date().toISOString(),
                dateFormatted: document.getElementById('date').textContent,
                lang: lang,
                totalItems: total,
                foundItems: found,
                missingItems: missing,
                customItems: customItems,
                totalCost: totalCost || 'Not provided'
            };
            
            // Save to localStorage for this device
            var logs = JSON.parse(localStorage.getItem('costco_shopping_logs') || '[]');
            logs.push(logData);
            localStorage.setItem('costco_shopping_logs', JSON.stringify(logs));
            
            // Create shareable summary message
            var summary = 'ğŸ›’ Costco Shopping - ' + document.getElementById('date').textContent + '\n\n' +
                'âœ… ' + (lang === 'en' ? 'Found: ' : 'Encontrados: ') + found.length + ' items\n' +
                'âŒ ' + (lang === 'en' ? 'Missing: ' : 'Faltaram: ') + missing.length + ' items\n' +
                'ğŸ’° ' + (lang === 'en' ? 'Total: ' : 'Total: ') + (totalCost ? '$' + totalCost : (lang === 'en' ? 'Not provided' : 'NÃ£o informado'));
            
            if (missing.length > 0 && missing.length <= 10) {
                summary += '\n\n' + (lang === 'en' ? 'âŒ Missing:\n' : 'âŒ Faltaram:\n') + missing.map(function(item) { return 'â€¢ ' + item; }).join('\n');
            } else if (missing.length > 10) {
                summary += '\n\n' + (lang === 'en' ? 'âŒ ' + missing.length + ' items were missing' : 'âŒ ' + missing.length + ' itens faltaram');
            }
            
            if (customItems.length > 0) {
                summary += '\n\n' + (lang === 'en' ? 'â• Custom items:\n' : 'â• Itens personalizados:\n') + customItems.map(function(item) { return 'â€¢ ' + item.name; }).join('\n');
            }
            
            // Ask if user wants to share
            var shareMsg = lang === 'en' 
                ? 'Shopping complete!\n\nWould you like to share this log with the family?'
                : 'Compras concluÃ­das!\n\nGostaria de compartilhar este registro com a famÃ­lia?';
            
            if (confirm(shareMsg)) {
                // Try to share via native share API
                if (navigator.share) {
                    navigator.share({
                        title: 'Costco Shopping Log',
                        text: summary
                    }).catch(function(err) {
                        // Fallback: copy to clipboard
                        copyToClipboard(summary);
                        alert(lang === 'en' 
                            ? 'âœ… Log copied to clipboard! Now you can paste it in WhatsApp or email.'
                            : 'âœ… Registro copiado! Agora vocÃª pode colar no WhatsApp ou email.');
                    });
                } else {
                    // Fallback: copy to clipboard
                    copyToClipboard(summary);
                    alert(lang === 'en' 
                        ? 'âœ… Log copied to clipboard! Now you can paste it in WhatsApp or email to share with everyone.'
                        : 'âœ… Registro copiado! Agora vocÃª pode colar no WhatsApp ou email para compartilhar com todos.');
                }
            } else {
                alert(lang === 'en' 
                    ? 'âœ… Log saved locally on this device only.'
                    : 'âœ… Registro salvo localmente apenas neste dispositivo.');
            }
            
            if (confirm(lang === 'en' ? 'Return to main list?' : 'Voltar Ã  lista principal?')) {
                window.location.href = 'index.html';
            }
        }
        
        function copyToClipboard(text) {
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(text);
            } else {
                // Fallback for older browsers
                var textarea = document.createElement('textarea');
                textarea.value = text;
                textarea.style.position = 'fixed';
                textarea.style.opacity = '0';
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
            }
        }
        
        updateCounter();
    </script>
</body>
</html>
